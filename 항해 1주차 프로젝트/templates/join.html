<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>회원가입</title>
</head>
<body>
  <h2>회원가입</h2>
  <div>
    <form action="/auth/join" method="post">
      <div>
        Email  <input type="text" name="email" class="email">
        <button type="button" class="check">중복 확인</button>
      </div>
      <div>
        Password  <input type="password" name="password" class="password">
      </div>
      <button type="submit">회원가입</button>
    </form>
  </div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  const $form = document.querySelector("form");
  const $check = document.querySelector(".check");
  const $email = document.querySelector(".email");
  const $password = document.querySelector(".password");

  let flag = true;
  $check.addEventListener("click", e => {
    const req = axios.post("/auth/check", {
      email: $email.value,
    });
    req
      .then(res => {
        if (res.data.result === "exist") {

          return alert("이미 가입된 이메일입니다.")

        };
        if (flag) return alert("사용해도 좋은 이메일입니다.");
      })
      .catch(err => console.error(err));
  });



</script>
</body>
</html>